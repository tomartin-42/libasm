     1                                  ;ft__strdup.s
     2                                  section .data
     3                                  
     4                                  section .bss
     5                                  
     6                                  section .text
     7                                  global  ft__strdup
     8                                  
     9                                  extern ft__strlen
    10                                  extern ft__strcpy
    11                                  extern malloc
    12                                  
    13                                  ft__strdup:
    14 00000000 4831C0                  	xor  rax, rax
    15                                  	;mov r9, rdi
    16 00000003 57                      	push rdi
    17 00000004 E8(00000000)            	call ft__strlen
    18 00000009 48FFC0                  	inc  rax
    19 0000000C 4889C7                  	mov  rdi, rax
    20 0000000F E8(00000000)            	call malloc
    21 00000014 4883F800                	cmp  rax, 0
    22 00000018 740A                    	je   end_fail
    23 0000001A 5E                      	pop  rsi
    24 0000001B 4889C7                  	mov  rdi, rax
    25 0000001E E8(00000000)            	call ft__strcpy
    26 00000023 C3                      	ret
    27                                  
    28                                  end_fail:
    29 00000024 4831C0                  	xor rax, rax
    30 00000027 BF00000000              	mov rdi, 0
    31 0000002C C3                      	ret
