     1                                  ;ft__strdup.s
     2                                  section .data
     3                                  
     4                                  section .bss
     5                                  
     6                                  section .text
     7                                  global  ft__strdup
     8                                  
     9                                  extern ft__strlen
    10                                  extern ft__strcpy
    11                                  extern malloc
    12                                  
    13                                  ft__strdup:
    14 00000000 4831C0                  	xor  rax, rax
    15 00000003 57                      	push rdi
    16 00000004 E8(00000000)            	call ft__strlen
    17 00000009 48FFC0                  	inc  rax
    18 0000000C 4889C7                  	mov  rdi, rax
    19 0000000F E8(00000000)            	call malloc
    20 00000014 4883F800                	cmp  rax, 0
    21 00000018 740A                    	je   end_fail
    22 0000001A 5E                      	pop  rsi
    23 0000001B 4889C7                  	mov  rdi, rax
    24 0000001E E8(00000000)            	call ft__strcpy
    25 00000023 C3                      	ret
    26                                  
    27                                  end_fail:
    28 00000024 4159                    	pop r9
    29 00000026 4831C0                  	xor rax, rax
    30 00000029 BF00000000              	mov rdi, 0
    31 0000002E C3                      	ret
