     1                                  ;ft__strdup.s
     2                                  section .data
     3                                  
     4                                  section .bss
     5                                  
     6                                  section .text
     7                                  global  ft__strdup
     8                                  
     9                                  extern ft__strlen
    10                                  extern ft__strcpy
    11                                  extern malloc
    12                                  
    13                                  ft__strdup:
    14                                  	;    Prolog
    15 00000000 55                      	push rbp
    16 00000001 4889E5                  	mov  rbp, rsp
    17                                  
    18 00000004 4831C0                  	xor  rax, rax
    19 00000007 57                      	push rdi
    20 00000008 E8(00000000)            	call ft__strlen
    21 0000000D 48FFC0                  	inc  rax
    22 00000010 4889C7                  	mov  rdi, rax
    23 00000013 E8(00000000)            	call malloc
    24 00000018 4883F800                	cmp  rax, 0
    25 0000001C 740E                    	je   end_fail
    26 0000001E 5E                      	pop  rsi
    27 0000001F 4889C7                  	mov  rdi, rax
    28 00000022 E8(00000000)            	call ft__strcpy
    29                                  	;    Epilog
    30 00000027 4889EC                  	mov  rsp, rbp
    31 0000002A 5D                      	pop  rbp
    32                                  
    33 0000002B C3                      	ret
    34                                  
    35                                  end_fail:
    36 0000002C 4159                    	pop r9
    37 0000002E 4831C0                  	xor rax, rax
    38 00000031 BF00000000              	mov rdi, 0
    39                                  	;   Epilog
    40 00000036 4889EC                  	mov rsp, rbp
    41 00000039 5D                      	pop rbp
    42                                  
    43 0000003A C3                      	ret
